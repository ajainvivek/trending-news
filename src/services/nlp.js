import jaccard from './../factory/jaccard';
import lodash from 'lodash';

const groupByTweet = function (collections, tweets, key, index = 0.1) {
	const result = {};

	// group by tweet name
	for (let i = 0; i < tweets.length; i++) {
		result[tweets[i].name] = [];
		for (let j = 0; j < collections.length; j++) {
			let text = typeof tweets[i][key] === 'string' ? tweets[i][key] : tweets[i][key].join(',');
			let scoreIndexSEO = jaccard.similarity(text, collections[j].seoText);
			let scoreIndexAbstract = jaccard.similarity(text, collections[j].abstract);
			if (scoreIndexSEO > index || scoreIndexAbstract > index) {
				let trending = {};
				trending.id = collections[j].id;
				trending.rank = i + 1;
				trending.collection = collections[j];
				trending.social = tweets[i];
				result[tweets[i].name].push(trending);
			}
		}
	}

	return result;
}


exports.groupedSimilarity = function () {
	const collections = [];
	const abstractTexts = ["Friends and family are paying tribute to an Austra…lunged to his death from a New York City rooftop.", "In 2015 the Canberra couple said they would dissolve their marriage as a matter of conscience.", "A man has been charged after allegedly attacking a… with a boomerang during a fight in Sydneys CDB.", "Victoria Police are investigating decades-old sexual assault allegations against the AFL legend.", "Gotta spend money to make money.", "Justin Kickett was on his way to his cousin's house but never made it.", "The new mother who gave birth in a coma after fall… showing signs of improvement at Alfred Hospital.", "Jarryd Hayne has copped an absolute ribbing from h…ague World Cup quarter-final against New Zealand.", "Conservation groups on Thursday decried US Preside…d animals' tusks or other body parts as trophies.", "A man has died in Queensland after a serious stabbing incident at a house in Queensland's Loganlea.", "The new app 'Yellow' is marketed at children - but it's also attracting adults.", "The team at Rub Smokehouse in Birmingham show us '…, who issues the challenge to sprint legend Bolt.", "Disgraced entertainer Rolf Harris has had one of 1…lt convictions overturned by the Court of Appeal.", "A man believed to be in his 50s was fixing a barri…rtham race track when he was struck by lightning.", "Road safety authorities are urging drivers to dro…o save lives in a nationwide speeding crackdown.", "A mural celebrating same-sex marriage, and mocking…dy been defaced just hours after it was finished.", "The barrister for a woman who pleaded guilty to he…agic reality is his death will remain a mystery.", "'Mnuchin and his wife picking up some toilet paper.'", "Ahead of the official announcement on Friday, insi…s, including a wicket keeper from out of nowhere!", "Former Labor leader claimed: 'These people are fomenting hatred of white people.'", "Three men have appeared in a NSW court for alleged…0 kilograms of cocaine into Australia on a yacht.", "Boar shot on a hunting trip believed responsible for striking family three adults down with illness.", "A source, believed to be a former US government in…as seen missing Jerry Krause with her 'own eyes'.", "A snake catcher has managed to wrangle in a deadly…edroom. Source: SOUTH BURNETT SNAKE CATCHERS 24/7", "The driver was flagged down by police in Vancouver… wearing headphones, leaving officers suspicious.", "Man pulled from mud in collapsed trench amid heavy rain at construction site in Melbourne's west.", "Shocking vision has emerged of a barrier attendant…e before a race in Launceston on Wednesday night.", "The Florida groomer has denied the allegations of …s her actions were in fact helping the small pet.", "Speeding driver allegedly trying to dodge traffic, clipped towie working on the roadside.", "The record has been set straight after conspiracy …wn devices in the aftermath of a product release.", "Liberal senator Dean Smith has broken down in the … same-sex marriage bill following the 'yes' vote.", "The winner took home the highest division one priz… in the state since 2014 and broke down in tears.", "A seven-year-old boy has been airlifted to hospita…x metre fall from a house roof in Sydney's north.", "Defence Industry Minister Christopher Pyne says hi…ter his account 'liked' a gay pornographic image.", "The store may have been closed, but nothing was go…stop this woman from getting her late-night feed.", "A police officer has been forced to resign after a… was launched into a photo he shared on Snapchat.", "The Fast Money traders give you 6 ways to trade a possible Fox content selloff.", "Former JC Penney CEO Ron Johnson looks at what's w…box the best bet? The Fast Money traders discuss.", "The Fast Money traders share their final trades of the day.", "Numbers of congressmen are joining the Minnesota l…Doug McKelway has the details for 'Special Report", "The Los Angeles radio anchor who accuses Democrati…y but he could have apologized earlier. (Nov. 16)", "Washington (AFP) - The administration of US Presid…e import of Zimbabwean elephant hunting trophies.", "'Unlike my post on April Fool's day in 2016 this news is not a joke.'", "Devonport Mayor Steve Martin has announced he intends to replace Jacqui Lambie in the Senate.", "The Fast Money traders discuss reports that CNBC p…columnist and author, and the Fast Money traders.", "Australia's oldest known human being is returning …ars - the shore of a dry lake in far western NSW.", "Mystery surrounds Nick Philippoussis' health with …o say what happened to the allege child molester.", "A judge has tossed the felony drug convictions of …ured evidence that sent them to prison. (Nov. 16)", "By Jonathan Landay and Patricia Zengerle  WASHINGT…ils among materials Lowell has failed to produce.", ".", "CNBC’s Tech Check brings you the latest in tech ne…om CNBC’s 1 Market in the heart of San Francisco.", "ABC News' Powerhouse Politics team analyzes toda…d allegations against Senate candidate Roy Moore.", "The Australian share market has soared more than h…eels of solid rises on Wall Street's key indexes.", "By Warren Strobel  WASHINGTON (Reuters) - The Unit…t's really what we're hoping for, Yamamoto said.", "Radio personality from REAL 92.3 Big Boy asks the … last time you saw something and said something?", "Perths traditional Christmas tree lighting ceremo…, but a new tradition begins in the city tonight.", "By Michelle Nichols  UNITED NATIONS (Reuters) - Ru… an April 4 attack, expires at midnight Thursday.", "Actor John Lithgow has said Hollywood is still try… alleged to have assaulted a number of actresses.", "Netflix Founder Reid Hoffman makes his feelings known on President Donald Trump.", "Friday's special guest is J. K. Simmons.", "LL COOL J exclusively announces on The Talk that…unify the generations as opposed to divide them.", "LL COOL J discusses filming the 200th episode of and filming a fight scene with Chris ODonnell.", "(Reuters) - Applied Materials Inc reported better-…nic light-emitting diode technology for displays.", "A new report has warned of continued job losses ac… because of declining investment in construction.", "Fisheries authorities have tagged a massive great white shark, 4.6 metres long, on WA's south coast.", "Malcolm Turnbull's penchant for taking selfies mig…be turned into a book to raise money for charity.", "Young kids who spend too much time playing with iP…ealth problems including neck, back and arm pain.", "By Timothy Gardner  WASHINGTON (Reuters) - The U.S…had used a private plane owned by oil executives.", "The US tax debate now moves to the Senate after th…d package, which critics say favours the wealthy.", "WA's police officers have received a new pay offer from the state government.", "Police are this morning still searching for a truc…ed a father of three on Leach Highway in Bateman.", "United Nations (United States) (AFP) - Russia on T… who is behind chemical weapons attacks in Syria.", "Miami (AFP) - Australia's Sarah Jane Smith and Tai…ing round of the season-ending Tour Championship.", "Victorian trainers Mark Kavanagh and Danny O'Brien have partly won an appeal over cobalt charges.", "It is unclear whether Fox's broadcast assets are p…ay TV provider Sky Plc , CNBC reported last week.", "Minnesota Senator Al Franken apologized Thursday a… his hands on her breasts as she slept. (Nov. 16)", "Here's the latest for Thursday, November 16th: Dem…aurant in Japan is serving a Trump-themed burger.", "A man is fighting for life this morning after witn…it by lighting on the track at Northam race club.", "By MacDonald Dzirutwe  HARARE (Reuters) - Zimbabwe…Constantino Chiwenga and South African mediators.", "Victorian trainers Mark Kavanagh and Danny O'Brien have partly won an appeal over cobalt charges.", "Cabinet minister Christopher Pyne insists there ar…al security after his Twitter account was hacked.", "Victoria's opposition wants to revive the controve… East West Link, which cost $1.2 billion to dump.", "Money managers say political risk, a large current…bt make Britain appear like a developing economy.", "One Nation has scoffed at the Queensland premier's… with Pauline Hanson's party to govern the state.", "A man who led police on a nearly 20-mile chase thr…nly after dancing once he stepped out of his car.", "Fox News contributor on the House passage of the Republican tax cut bill.", "New York (AFP) - Speculation is mounting over the … York on charges of defying US sanctions on Iran.", "CNBC's Sue Herera reports Comcast Corporation has …hed 21st Century Fox about acquiring the company.", "Felix Salmon, senior editor at Fusion, is skeptica…millions paid for a painting by Leonardo da Vinci", "Dan Ariely, behavioral economist at Duke University, on why we sometimes overspend on things", "Thousands of attendees at the UN climate talks wer…f Bonn during the fortnight-long COP23 gathering.", "Roger Federer has cruised into the semi-finals of …c in three sets in their Wimbledon final rematch.", "A Sydney man found guilty of murdering and sexuall… is due to be sentenced in the NSW Supreme Court.", "The junk-rated Chicago Board of Education complete…Schools (CPS) included heftier 7 percent coupons.", "CNBC's Ylan Mui and Dan Clifton, Strategas Researc… the House and where the GOP plan goes from here.", "By Jorge Silva  COX'S BAZAR, Bangladesh (Reuters) …ong refugee camp, near Cox's Bazar in Bangladesh.", "New York (AFP) - A committee of creditors on Thurs…nother blow to the oil-rich but cash-poor nation.", "James Albertine, Consumer Edge Research, and Gabe …ny's release of its latest vehicle, a semi truck.", "Ahu Yildirmaz of ADP Research Institute on their new report on Canada's employment picture", "Democrats avoided potentially losing a seat in the…n their long-shot quest to take back the chamber."]
	const tweets = [{
		name: 'Shaun Marsh',
		text: ['They have totally lost me, fucking Shaun Marsh for God’s sake are there no young guys playing cricket anymore', 'Australia 13-man squad for the first two #AshesTests Squad vs England Steve Smith (c), David Warner (vc)']
	}];

	const groupByTweetName = groupByTweet(collections, tweets, 'name', 0.1);



}


exports.ranked = function () {

}